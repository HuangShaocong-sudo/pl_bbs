!function(e){var t={};function i(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([,function(e,t,i){e.exports=i(2)},function(e,t){!function(e,t,i){var o,n=i.ns("util"),r=i.ns("ui");t.blockUI.defaults.css={},e.returnCount=function(e){e&&(t("#j-ted").text("共"+e.TED+"门课程"),t("#j-khan").text("共"+e.可汗学院+"门课程"),t("#j-china").text("共"+e.中国大学视频公开课+"门课程"),t("#j-world").text("共"+e.国际名校公开课+"门课程"),t("#j-bbc").text("共"+e.BBC+"门课程"),t("#j-yanj").text("共"+e.演讲+"门课程"))};function s(){t.cookie("open_package_push_"+o,"true",{expires:365,domain:".163.com",path:"/"})}i.cb=i.cb||{},i.cb.initIndex=function(){var i,o;!function(){var e=t(".open-pay"),i=(t(".home-pay-list-container"),t(".home-pay-page"));if(0!==e.length){var o=function(o){if(o.data){for(var n=t("#j-pay-tmp").val(),r=0;r<8;r++){var s=o.data[r];s&&(s.hasCoupon=s.couponInfo&&2===s.couponInfo.activityStatus,s.hasCoupon&&(s.couponInfo.finalPrice=(s.couponInfo.finalPrice/100).toFixed(2)),200===s.contentType?s.url="//vip.open.163.com/courses/series/"+s.id:s.url="//vip.open.163.com/courses/"+s.courseUid,s.price=(s.originPrice/100).toFixed(2),s.imgurl=s.imageHorizontalUrl,s.imgurl?-1==s.imgurl.indexOf("http://imgsize.ph.126.net/?enlarge=true&imgurl")?-1==s.imgurl.indexOf("nosdn.127")?s.imgurl="https://oimagec2.ydstatic.com/image?url="+s.imgurl.replace(/(^\s*)|(\s*$)/g,"")+"&w=276&h=155&cw=276&ch=155&fill=0&sbc=0&quality=95&cgra=TOP_CENTER&product=open":(s.imgurl=s.imgurl.replace(/^https?(.*)/,"https$1"),s.imgurl=s.imgurl.replace(/\?.*/,"")+"?imageView&thumbnail=540y300&enlarge=1&quality=85"):s.imgurl.replace(/^https?(.*)/,"https$1"):s.imgurl="//s2.open.163.com/ocb/res/img/default.jpg",s.status=1===s.updateMarking?"更新中":"已完结")}var c=t.tmpl(n,o.data.slice(0,8)),u=t("#j-openPayList1");u.html(c),u.find("a").each((function(e){var i=t(this);setTimeout((function(){i.removeClass("z-hide")}),50*e+25)})),o.data.length>4||i.hide(),u.show(),e.show()}};n._utracker(),jQuery.ajax({url:"//vip.open.163.com/open/trade/pc/course/getHomeRecommend.do",scriptCharset:"utf-8"}).done(o)}}(),i=function(e){if(e.result){for(var i=t("#j-guess-tmp").val(),o=0;o<6;o++){var n=e.result[o].iteminfo;n&&(n.url=n.url.replace(/(^\s*)|(\s*$)/g,""),n.url.indexOf("?")>0?n.url+="&recomend=1":n.url+="?recomend=1",n.imgurl?-1==n.imgurl.indexOf("http://imgsize.ph.126.net/?enlarge=true&imgurl")?-1==n.imgurl.indexOf("nosdn.127.net")?n.imgurl="https://nimg.ws.126.net/?url="+n.imgurl.replace(/(^\s*)|(\s*$)/g,"")+"&thumbnail=180x100&quality=95&type=jpg":n.imgurl=n.imgurl.replace(/^http(.*)/,"https$1"):n.imgurl.replace(/^http(.*)/,"https$1"):n.imgurl="//s2.open.163.com/ocb/res/img/default.jpg")}var r=t.tmpl(i,e.result);r.eq(5).addClass("g-hide");var s=t("#j-openGYLList");s.html(r),s.find(".oviTitle").each((function(){var e=t(this);e.text().length>24&&e.text(e.text().substr(0,23)+"…")})),s.find("a").each((function(e){var i=t(this);setTimeout((function(){i.removeClass("z-hide")}),50*e+25)}))}},(o=function(){n._utracker(),jQuery.ajax({url:"//c.open.163.com/opensg/opensg.do",data:{uuid:t.cookie("__oc_uuid"),ursid:e.openCourse.util.isLogin()||"",count:6},scriptCharset:"utf-8",dataType:"jsonp",jsonp:"callback"}).done(i)})(),t("#j-guessBtn").click((function(){o()})),t(".m-openGYL .j-loginBtn").click((function(){e.openCourse.ui.loginui()}))};var c,u=t("#app_download_recommend");u.length&&("undefined"!=typeof sessionStorage&&(c=sessionStorage.getItem("appDownloadRecommend")),1!=c&&u.removeClass("f-dn"));var a=t("#app_download_recommend .u-btn-close");a.length&&a.click((function(){"undefined"!=typeof sessionStorage&&sessionStorage.setItem("appDownloadRecommend",1),t("#app_download_recommend").remove()})),function(){var e=t("#j-xtx-btn"),i=t("#j-xtx-dialog"),o=i.find(".j-close");e.click((function(){n()})),o.click((function(){t.unblockUI()}));var n=function(){t.blockUI({message:i,blockMsgClass:"u-xtx-dialog"})}}(),t.getJSON("//c.open.163.com/open/getLatestMovies.do?callback=?",(function(e){for(var i,o=t(".j-hotlist"),n="",r=0;r<e.length&&!(r>9)&&e[r]&&e[r].title;r++){var s=r<=2?"icon icon2":"icon";n+='<li><a href="'+e[r].url+'" target="_blank" class="item"><i class="'+s+'">'+((i=r+1)<10?"0"+i:i)+'</i><span class="ltxt f-ib f-thide">'+e[r].title+"</span></a></li>"}o.html(n)})),t(".m-openECList,.m-categoryList").each((function(){t(this).find(".u-openVideoItem:not(.topItem)").slice(-2).addClass("g-hide")})),t(".osiTag,.oviTag").each((function(){var e=t(this),i="";switch(e.text()){case"课随你变":i="#dd8700";break;case"趣味课堂":i="#4a9bac";break;case"知识共享":i="#51b79b";break;case"态度公开课":i="#4a9bac";break;default:i="#09924b"}e.css("background-color",i)})),t(".oviViewCount").each((function(){t(this).text(i.util._formatViewCount(t(this).text()))})),jQuery.ajax({url:"//c.open.163.com/pack/notify.do",scriptCharset:"utf-8",dataType:"jsonp",jsonp:"callback"}).done((function(e){e&&e.notify&&function(e){var i=(new Date).getTime();if(i>=e.sendTime&&i<e.endTime&&1==e.status){if(o=e.id,t.cookie("open_package_push_"+o))return;var n=t("#j-package-dialog");n.find(".j-close").on("click",(function(){t.unblockUI(),s()})),n.find(".j-look").on("click",s),n.find(".j-look").attr("href",e.url),n.find(".j-tit").text(e.tag),n.find(".j-bg").attr("src",e.picUrl),n.find(".j-morelink").attr("href",e.extraUrl),t.blockUI({message:n,blockMsgClass:"u-packdialog"})}}(e.notify)})),r.switchSlide({pevBtn:"#j-package-switch-pevbtn",nextBtn:"#j-package-switch-nextbtn",container:"#j-package-switch-container",wrap:[{itemWidth:240,containerWidth:960,scrollCount:4,baseleft:0},{itemWidth:295,containerWidth:1180,scrollCount:4,baseleft:0}]}),function(){if(0===HOME_ACTIVITY_DISCOUNT_DATA.items.length)return;for(var e=[],i=0;i<HOME_ACTIVITY_DISCOUNT_DATA.items.length;i++){var o=HOME_ACTIVITY_DISCOUNT_DATA.items[i].url,n=/courses\/(\d+)$/.exec(o);e.push(Number(n[1]))}console.log("ids=",e);let r=/http.+\.com/.exec(HOME_ACTIVITY_DISCOUNT_DATA.items[0].url)[0];jQuery.ajax({url:"//vip.open.163.com/open/trade/pc/course/getDCCourses.do",type:"POST",contentType:"application/json",data:JSON.stringify(e),success(i){if(200===i.code&&i.data&&i.data.length>0){t(".home-activity-discount").show();let o=HOME_ACTIVITY_DISCOUNT_DATA.title,n=i.data;if(n=e.map(e=>n.find(({id:t})=>t===e)||void 0).filter(e=>e),0===n.length)return;!function({title:e,courseList:t,origin:i}){Vue.filter("durationTime",(function(e){var t=e%60,i=e%86400%3600/60|0,o=e%86400/3600|0,n=e/86400|0;return e<60?`${i}分${t}秒`:e<=3600?`${o}小时${i}分`:e<=864e3?`${n}天${o}小时${i}分`:(n?n+"天":"")+(o?o+"小时":n?"0小时":"")+i+"分"+t+"秒"})),Vue.filter("price",(function(e){return(e=e||0).toFixed(2)})),Vue.component("course-list-item",{props:["courseInfo","origin"],template:"#course-list-item-template",data:()=>({leftTime:0,showLeftTime:!1}),computed:{discountText(){return this.courseInfo.discount?10*this.courseInfo.discount+"折":"优惠"},isCombo(){return this.courseInfo&&200===this.courseInfo.contentType},isComboCourse(){return"comboCentPrice"in this.courseInfo},detailUrl(){return this.origin+"/courses/"+this.courseInfo.courseUid+"?p=home_discount_order_pc"},couponInfo(){return this.courseInfo.couponInfo},hasCoupon(){return this.courseInfo.price>this.courseInfo.nowprice},originPrice(){return this.courseInfo.originPrice||this.courseInfo.price||this.courseInfo.originCentPrice||0},finalPrice(){return this.hasCoupon||this.isCombo?this.couponInfo.finalPrice:this.isComboCourse?this.courseInfo.comboCentPrice:this.originPrice},leftNum(){return isNaN(this.couponInfo.remainderNum)?100:this.couponInfo.remainderNum},coverImg(){return{backgroundImage:'url("'+this.imgUrl+'")'}},imgUrl(){return this.nosImage(this.courseInfo.imgUrl,{thumbnail:"540y300",quality:90,interlace:1},window)},interestCount(){const{interestCount:e=0}=this.courseInfo;return e<1e5?e.toString():(e/1e4).toFixed(1)}},methods:{setLeftTimer(){let e=this;e.leftTime=e.courseInfo.time/1e3|0,e.showLeftTime=1,e.timer=setInterval(function(){return e.leftTime-=1,e.leftTime<=0&&clearInterval(e.timer),arguments.callee}(),1e3)},nosImage(e,t,i){const o=/(^https?:\/\/[^.]+\.nosdn[^?]+)\??(.*$)?/i.exec(e);if(!o)return e;const{1:n,2:r}=o,s=n.replace(/^https?:\/\//i,"https://plus-").replace("nosdn.127.net","ws.126.net");if(!t&&!i||/.gif$/gi.test(n))return s+"?"+r;const c={};if(t)Object.assign(c,t);else{let e={};r&&(e=r.split("&").reduce((e,t)=>{const i=t.split("=");return e[i[0]]=i[1],e},{})),Object.assign(c,e)}i&&(c.type="webp");const u=Object.keys(c);if(u.length){return c.imageView=void 0,s+"?"+u.reduce((e,t)=>e+"&"+t+"="+c[t],"imageView")}return s}},mounted(){1===this.courseInfo.type&&this.setLeftTimer()},beforeDestroy(){clearInterval(this.timer)}});new Vue({el:".home-activity-discount",data:()=>({origin:i,title:e,courseList:t})})}({origin:r,title:o,courseList:n})}}})}()}(window,window.jQuery,window.openCourse||{})}]);